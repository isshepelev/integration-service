<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#0a0a0f">
    <title>Сервис Интеграции - API Портал</title>
    <!-- Theme System -->
    <link rel="stylesheet" th:href="@{/css/theme.css}">
    <link rel="stylesheet" th:href="@{/css/animations.css}">
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <script th:src="@{/js/theme-switcher.js}" defer></script>
</head>
<body class="futuristic-body">
    <div class="container">
        <header class="main-header">
            <div class="header-content">
                <div class="header-title">
                    <h1 class="gradient-text-holo">Integration Service</h1>
                    <p class="subtitle">Мультипротокольный API Портал</p>
                </div>
                <button class="theme-toggle-btn ripple-container" data-theme-toggle aria-label="Сменить тему" title="Сменить тему">
                    <span class="icon-sun">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="5"/>
                            <line x1="12" y1="1" x2="12" y2="3"/>
                            <line x1="12" y1="21" x2="12" y2="23"/>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
                            <line x1="1" y1="12" x2="3" y2="12"/>
                            <line x1="21" y1="12" x2="23" y2="12"/>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
                        </svg>
                    </span>
                    <span class="icon-moon" style="display: none;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </span>
                </button>
            </div>
        </header>

        <main>
            <section class="api-section">
                <h2>Документация API</h2>
                <p>Выберите протокол для просмотра документации или взаимодействия с API:</p>

                <div class="cards">
                    <!-- REST / OpenAPI -->
                    <div class="card rest protocol-rest neo-glass-card card-reveal hover-lift">
                        <div class="card-icon">REST</div>
                        <h3>REST API</h3>
                        <p>Спецификация OpenAPI 3.0 со Swagger UI для интерактивного изучения.</p>
                        <div class="card-links">
                            <a th:href="@{/swagger-ui.html}" class="btn btn-primary btn-press ripple-container">Swagger UI</a>
                            <a th:href="@{/v3/api-docs}" class="btn btn-secondary btn-press ripple-container" target="_blank">OpenAPI JSON</a>
                            <a th:href="@{/v3/api-docs.yaml}" class="btn btn-secondary btn-press ripple-container" target="_blank">OpenAPI YAML</a>
                        </div>
                        <div class="endpoint-info">
                            <code class="neon-text-cyan">GET /api/products</code>
                        </div>
                    </div>

                    <!-- GraphQL -->
                    <div class="card graphql protocol-graphql neo-glass-card card-reveal hover-lift">
                        <div class="card-icon">GraphQL</div>
                        <h3>GraphQL API</h3>
                        <p>Гибкий язык запросов со встроенным GraphiQL IDE для тестирования.</p>
                        <div class="card-links">
                            <a th:href="@{/graphql-playground}" class="btn btn-primary btn-press ripple-container">Playground</a>
                            <a th:href="@{/graphql-examples}" class="btn btn-secondary btn-press ripple-container">Примеры</a>
                            <a th:href="@{/graphiql}" class="btn btn-secondary btn-press ripple-container">GraphiQL IDE</a>
                        </div>
                        <div class="endpoint-info">
                            <code class="neon-text-pink">POST /graphql</code>
                        </div>
                    </div>

                    <!-- gRPC -->
                    <div class="card grpc protocol-grpc neo-glass-card card-reveal hover-lift">
                        <div class="card-icon">gRPC</div>
                        <h3>gRPC API</h3>
                        <p>Высокопроизводительный RPC-фреймворк с Protocol Buffers.</p>
                        <div class="card-links">
                            <a href="#grpc-info" class="btn btn-primary btn-press ripple-container" onclick="toggleGrpcInfo()">Подключение</a>
                            <a th:href="@{/grpc-examples}" class="btn btn-secondary btn-press ripple-container">Примеры</a>
                        </div>
                        <div class="endpoint-info">
                            <code class="neon-text-green" th:text="'localhost:' + ${grpcPort}">localhost:9090</code>
                        </div>
                        <div id="grpc-info" class="grpc-details code-block-2090" style="display: none;">
                            <h4>Использование grpcurl:</h4>
                            <pre>
# Список сервисов
grpcurl -plaintext localhost:<span th:text="${grpcPort}">9090</span> list

# Получить продукты
grpcurl -plaintext -d '{}' \
  localhost:<span th:text="${grpcPort}">9090</span> \
  product.ProductService/GetProducts</pre>
                        </div>
                    </div>

                    <!-- SOAP -->
                    <div class="card soap protocol-soap neo-glass-card card-reveal hover-lift">
                        <div class="card-icon">SOAP</div>
                        <h3>SOAP Web Service</h3>
                        <p>XML-протокол для корпоративной интеграции.</p>
                        <div class="card-links">
                            <a th:href="@{/ws/integration.wsdl}" class="btn btn-primary btn-press ripple-container" target="_blank">WSDL</a>
                            <a th:href="@{/soap-examples}" class="btn btn-secondary btn-press ripple-container">Примеры</a>
                        </div>
                        <div class="endpoint-info">
                            <code class="neon-text-orange">POST /ws</code>
                        </div>
                    </div>
                </div>
            </section>

            <section class="quick-links neo-glass-card animate-fade-up">
                <h2>Быстрые ссылки</h2>
                <div class="links-grid">
                    <div class="link-group">
                        <h4>API Эндпоинты</h4>
                        <ul>
                            <li><a th:href="@{/api/products}">GET /api/products</a></li>
                            <li><a th:href="@{/api/products?includeAvailability=true}">GET /api/products?includeAvailability=true</a></li>
                            <li><a th:href="@{/api/products/1}">GET /api/products/1</a></li>
                            <li><a th:href="@{/api/products/sku/SAM-S24-BLK}">GET /api/products/sku/SAM-S24-BLK</a></li>
                        </ul>
                    </div>
                    <div class="link-group">
                        <h4>Документация</h4>
                        <ul>
                            <li><a th:href="@{/swagger-ui.html}">Swagger UI</a></li>
                            <li><a th:href="@{/v3/api-docs}">OpenAPI Spec (JSON)</a></li>
                            <li><a th:href="@{/v3/api-docs.yaml}">OpenAPI Spec (YAML)</a></li>
                            <li><a th:href="@{/graphql-playground}">GraphQL Playground</a></li>
                            <li><a th:href="@{/graphql-examples}">Примеры GraphQL</a></li>
                            <li><a th:href="@{/graphiql}">GraphiQL IDE</a></li>
                            <li><a th:href="@{/grpc-examples}">Примеры gRPC</a></li>
                            <li><a th:href="@{/soap-examples}">Примеры SOAP</a></li>
                            <li><a th:href="@{/ws/integration.wsdl}">WSDL Схема</a></li>
                        </ul>
                    </div>
                    <div class="link-group">
                        <h4>Информация о сервере</h4>
                        <ul>
                            <li>HTTP Порт: <code th:text="${serverPort}">8080</code></li>
                            <li>gRPC Порт: <code th:text="${grpcPort}">9090</code></li>
                        </ul>
                    </div>
                </div>
            </section>
        </main>

        <footer class="main-footer">
            <p>Integration Service v1.0.0 | Spring Boot 4.0.1</p>
        </footer>
    </div>

    <!-- Background Effects -->
    <div class="bg-grid"></div>
    <div class="bg-glow"></div>

    <script>
        function toggleGrpcInfo() {
            var info = document.getElementById('grpc-info');
            if (info.style.display === 'none') {
                info.style.display = 'block';
            } else {
                info.style.display = 'none';
            }
        }

        // Add ripple effect to buttons
        document.addEventListener('DOMContentLoaded', function() {
            var buttons = document.querySelectorAll('.ripple-container');
            buttons.forEach(function(btn) {
                btn.addEventListener('click', function(e) {
                    var rect = this.getBoundingClientRect();
                    var ripple = document.createElement('span');
                    ripple.className = 'ripple';
                    var size = Math.max(rect.width, rect.height);
                    ripple.style.width = ripple.style.height = size + 'px';
                    ripple.style.left = (e.clientX - rect.left - size / 2) + 'px';
                    ripple.style.top = (e.clientY - rect.top - size / 2) + 'px';
                    this.appendChild(ripple);
                    setTimeout(function() { ripple.remove(); }, 600);
                });
            });
        });
    </script>
</body>
</html>
